@import "tailwindcss";

/* Custom variant for dark mode */
@custom-variant dark (&:where(.dark, .dark *));

/* Plugins */
@plugin "@tailwindcss/typography";
@plugin "tailwindcss-animate";

:root {
  /* Cre8rFlow dark palette (default theme) */
  --background: hsl(240 12% 8%);
  --foreground: hsl(0 0% 96%);

  --card: hsl(240 11% 12%);
  --card-foreground: hsl(0 0% 96%);

  --popover: hsl(240 11% 12%);
  --popover-foreground: hsl(0 0% 98%);

  --primary: hsl(252 47% 66%);
  --primary-foreground: hsl(0 0% 100%);

  --secondary: hsl(240 9% 18%);
  --secondary-foreground: hsl(0 0% 96%);

  --muted: hsl(240 8% 26%);
  --muted-foreground: hsl(0 0% 65%);

  --accent: hsl(252 47% 66%);
  --accent-foreground: hsl(0 0% 100%);

  --destructive: hsl(0 79% 63%);
  --destructive-foreground: hsl(0 0% 100%);

  --border: hsl(240 11% 24%);
  --input: hsl(240 10% 22%);
  --ring: hsl(252 47% 66%);

  --chart-1: hsl(252 47% 66%);
  --chart-2: hsl(160 60% 45%);
  --chart-3: hsl(32 90% 60%);
  --chart-4: hsl(280 65% 60%);
  --chart-5: hsl(340 75% 58%);

  --sidebar-background: hsl(240 11% 11%);
  --sidebar-foreground: hsl(0 0% 96%);
  --sidebar-primary: hsl(252 47% 66%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 9% 18%);
  --sidebar-accent-foreground: hsl(0 0% 96%);
  --sidebar-border: hsl(240 10% 22%);
  --sidebar-ring: hsl(252 47% 66%);

  --panel-background: hsl(240 10% 13%);
  --panel-accent: hsl(240 8% 20%);

  --surface-base: #171717;
  --surface-elevated: #1e1e1e;
  --surface-muted: #262636;

  --cre8r-violet: #7f7fd5;
  --cre8r-violet-light: #9b8fe8;
  --cre8r-violet-dark: #6b5fc7;
  --cre8r-gray-900: #0f0f14;
  --cre8r-gray-800: #1e1e27;
  --cre8r-gray-700: #2d2d3b;
  --cre8r-gray-600: #3d3d4d;
  --cre8r-gray-500: #53536a;
  --cre8r-gray-400: #7b7b94;
  --cre8r-gray-300: #a0a0bb;
  --cre8r-gray-200: #c8c8df;
  --cre8r-gray-100: #e5e5f4;

  --shadow-soft: 0 18px 24px -16px rgba(12, 12, 20, 0.65);
  --shadow-medium: 0 22px 48px -18px rgba(15, 15, 25, 0.7);
  --shadow-strong: 0 36px 72px -24px rgba(10, 10, 20, 0.8);

  --gradient-app: radial-gradient(
    120% 120% at 50% 0%,
    rgba(127, 127, 213, 0.35) 0%,
    rgba(20, 20, 30, 0.92) 48%,
    rgba(12, 12, 20, 1) 100%
  );
  --gradient-panel: linear-gradient(
    150deg,
    rgba(127, 127, 213, 0.45) 0%,
    rgba(47, 47, 135, 0.35) 35%,
    rgba(27, 27, 45, 0.95) 55%,
    rgba(127, 127, 213, 0.25) 100%
  );
  --gradient-quick-action: linear-gradient(
    135deg,
    rgba(45, 45, 70, 0.95) 0%,
    rgba(111, 111, 203, 0.35) 50%,
    rgba(63, 63, 173, 0.45) 100%
  );

  /* Radius base */
  --radius: 0.875rem;
}

.dark {
  color-scheme: dark;
  --background: hsl(240 12% 8%);
  --foreground: hsl(0 0% 96%);
  --card: hsl(240 11% 12%);
  --card-foreground: hsl(0 0% 96%);
  --popover: hsl(240 11% 12%);
  --popover-foreground: hsl(0 0% 98%);
  --primary: hsl(252 47% 66%);
  --primary-foreground: hsl(0 0% 100%);
  --secondary: hsl(240 9% 18%);
  --secondary-foreground: hsl(0 0% 96%);
  --muted: hsl(240 8% 26%);
  --muted-foreground: hsl(0 0% 65%);
  --accent: hsl(252 47% 66%);
  --accent-foreground: hsl(0 0% 100%);
  --destructive: hsl(0 79% 63%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(240 11% 24%);
  --input: hsl(240 10% 22%);
  --ring: hsl(252 47% 66%);
  --sidebar-background: hsl(240 11% 11%);
  --sidebar-foreground: hsl(0 0% 96%);
  --sidebar-primary: hsl(252 47% 66%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 9% 18%);
  --sidebar-accent-foreground: hsl(0 0% 96%);
  --sidebar-border: hsl(240 10% 22%);
  --sidebar-ring: hsl(252 47% 66%);
  --panel-background: hsl(240 10% 13%);
  --panel-accent: hsl(240 8% 20%);
}

@layer base {
  /*
    The default border color has changed to `currentcolor` in Tailwind CSS v4,
    so we've added these compatibility styles to make sure everything still
    looks the same as it did with Tailwind CSS v3.

    If we ever want to remove these styles, we need to add an explicit border
    color utility to any element that depends on these defaults.
  */
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
  /* Other default base styles */
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    background-image: var(--gradient-app);
    background-attachment: fixed;
    background-size: cover;
    /* Prevent back/forward swipe */
    overscroll-behavior-x: contain;
  }
}

@layer utilities {
  .bg-surface-base {
    background-color: var(--surface-base);
  }

  .bg-surface-elevated {
    background-color: var(--surface-elevated);
  }

  .bg-panel-gradient {
    background: var(--gradient-panel);
  }

  .bg-quick-action {
    background: var(--gradient-quick-action);
  }

  .shadow-soft {
    box-shadow: var(--shadow-soft);
  }

  .shadow-medium {
    box-shadow: var(--shadow-medium);
  }

  .shadow-strong {
    box-shadow: var(--shadow-strong);
  }
}

@theme inline {
  /* Responsive breakpoints */
  --breakpoint-xs: 30rem;

  /* Typography */
  --font-sans: var(--font-inter), sans-serif;

  /* Font sizes */
  --text-base: 0.95rem;
  --text-base--line-height: calc(1.5 / 0.95);
  --text-xs: 0.8rem;
  --text-xs--line-height: calc(1 / 0.8);

  /* Border radius */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 8px);

  /* Palette mapped to root design tokens */
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Chart colors */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Sidebar */
  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Panel */
  --color-panel: var(--panel-background);
  --color-panel-accent: var(--panel-accent);

  --color-surface-base: var(--surface-base);
  --color-surface-elevated: var(--surface-elevated);
  --color-surface-muted: var(--surface-muted);

  /* Animations */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  /* Command animation theme tokens */
  --command-trim-color: rgba(45, 212, 191, 0.9); /* teal */
  --command-trim-fill: rgba(45, 212, 191, 0.18);
  --command-cut-color: rgba(249, 115, 129, 0.9); /* pink */
  --command-cut-fill: rgba(249, 115, 129, 0.18);
  --command-caption-color: rgba(250, 204, 21, 0.9); /* amber */
  --command-caption-fill: rgba(250, 204, 21, 0.18);
  --command-deadspace-color: rgba(110, 231, 183, 0.9);
  --command-deadspace-fill: rgba(110, 231, 183, 0.18);
  --command-generic-color: rgba(96, 165, 250, 0.9);
  --command-generic-fill: rgba(96, 165, 250, 0.18);

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

@utility scrollbar-hidden {
  -ms-overflow-style: none;
  scrollbar-width: none;
  &::-webkit-scrollbar {
    display: none;
  }
}

@utility scrollbar-x-hidden {
  -ms-overflow-style: none;
  scrollbar-width: none;
  &::-webkit-scrollbar:horizontal {
    display: none;
  }
}

@utility scrollbar-y-hidden {
  -ms-overflow-style: none;
  scrollbar-width: none;
  &::-webkit-scrollbar:vertical {
    display: none;
  }
}

@utility scrollbar-thin {
  &::-webkit-scrollbar {
    width: 6px;
    height: 8px;
  }
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  &::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 4px;
  }
  &::-webkit-scrollbar-thumb:hover {
    background: var(--muted-foreground);
  }
}

.timeline-command-frame {
  position: absolute;
  top: -4px;
  bottom: -4px;
  left: -4px;
  right: -4px;
  pointer-events: none;
  border-radius: 0.875rem;
  border: 2px solid var(--command-frame-color, rgba(96, 165, 250, 0.85));
  background: linear-gradient(
    180deg,
    color-mix(
      in srgb,
      var(--command-frame-fill, rgba(96, 165, 250, 0.16)) 70%,
      transparent
    ),
    transparent 90%
  );
  box-shadow:
    0 0 0 1px
    color-mix(
      in srgb,
      var(--command-frame-color, rgba(96, 165, 250, 0.85)) 40%,
      transparent
    ),
    0 8px 24px -12px
    color-mix(
      in srgb,
      var(--command-frame-color, rgba(96, 165, 250, 0.85)) 30%,
      transparent
    );
  overflow: hidden;
  transition:
    opacity 0.35s ease-out,
    transform 0.35s ease-out;
}

.timeline-command-frame--complete {
  opacity: 0;
}

.timeline-command-frame--error {
  border-color: rgba(248, 113, 113, 0.85);
  box-shadow:
    0 0 0 1px rgba(248, 113, 113, 0.35),
    0 8px 24px -12px rgba(248, 113, 113, 0.35);
}

.timeline-command-frame__progress {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  width: 0;
  background: linear-gradient(
    90deg,
    color-mix(
      in srgb,
      var(--command-frame-color, rgba(96, 165, 250, 0.85)) 60%,
      transparent
    ),
    transparent 85%
  );
  transition: width 0.5s ease-out;
  opacity: 0.9;
}

.timeline-command-frame--preview::after {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    120deg,
    transparent 0,
    transparent 12px,
    color-mix(
        in srgb,
        var(--command-frame-color, rgba(96, 165, 250, 0.85)) 25%,
        transparent
      )
      12px,
    color-mix(
        in srgb,
        var(--command-frame-color, rgba(96, 165, 250, 0.85)) 25%,
        transparent
      )
      24px
  );
  animation: timelineCommandPreview 1.2s linear infinite;
  opacity: 0.6;
}

@keyframes timelineCommandPreview {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(24px);
  }
}
